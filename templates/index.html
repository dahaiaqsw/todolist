{% extends "base.html" %}
{% block head %}
    <link rel="stylesheet" type="text/css" href="../static/bootstrap-combined.min.css">
{% endblock %}
{% block page_content %}
    <body style="margin-left: 500px;">
    <div class="container-fluid">
	<div class="row-fluid">
		<div class="span12">
			<h3 class="text-center" style="text-align:left">
				TodoList
			</h3>

			<div style="float: right">
                <h4>
                    欢迎你,
                    {% if current_user.is_authenticated %}
                        {{ current_user.username }}
                        <a href="/logout">登出</a>
                    {% else %}
                        路人
                    {% endif %}
                </h4>
                    {% if not current_user.is_authenticated %}
                        <a href="/login">登录</a>
					    <a href="/register">注册</a>
                    {% endif %}
			</div>
			<div class="row-fluid">
				<div class="span12">
                    <fieldset style="margin-left:-60px">
                        <input type="text" placeholder="待办事项" />
                        <span class="btn btn-info" id='add_todo' style="margin-top: -10px; margin-left: 10px;">新增</span>
                    </fieldset>
				</div>
			</div>
			<div class="row-fluid">
				<div class="span12">
					<div class="row-fluid" id="outer">
						<div class="span12" id="inner">
							<h4>
								正在进行 <span class="badge" style="font-size: 15.844px;">
                                        {% if current_user.is_authenticated %}
                                            {{ todos.count() }}
                                        {% endif %}
                                        </span>
							</h4>
							<div class="row-fluid">
								<div class="span12">
									<ul>
                                        {% if current_user.is_authenticated %}
                                        {% for item in todos %}
										<li style="position: relative">
                                            <input type="hidden" value="{{item.id}}">
											<span>{{item.content}}</span>
                                            <span class="label btn-info" onclick="finish($(this))" style="margin-right: 400px;float: right">完成</span>
                                            <span class="label btn-info" onclick="del($(this))" style="float: right">删除</span>
										</li>
                                        {% endfor %}
                                        {% endif %}
									</ul>
								</div>
							</div>
							<h4>
								已经完成 <span class="badge" style="font-size: 15.844px;">
                                        {% if current_user.is_authenticated %}
                                            {{ finished.count() }}
                                        {% endif %}
                                        </span>
							</h4>
							<div class="row-fluid">
								<div class="span12">
									<ul>
                                        {% if current_user.is_authenticated %}
                                        {% for item in finished %}
										<li>
                                            <input type="hidden" value="{{item.id}}">
                                            <span>{{item.content}}</span>
                                            <span class="label btn-info" onclick="del($(this))" style="float: right;margin-right: 400px;">删除</span>
										</li>
                                        {% endfor %}
                                        {% endif %}
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</body>
{% endblock %}
{% block scripts %}
    {{ super() }}
    <script type="text/javascript" src="{{ url_for('static', filename='index.js') }}"></script>
{% endblock %}
